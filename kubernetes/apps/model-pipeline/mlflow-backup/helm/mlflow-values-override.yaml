extraEnvVars:
  MLFLOW_SERVER_DISABLE_SECURITY_MIDDLEWARE: "true"


auth:
  # Mlflow user facing authentication
  enabled: true
  existingAdminSecret:
    name: mlflow-credentials-secret
    usernameKey: username
    passwordKey: password

  # Postgesql information
  postgres:
    enabled: true
    host: "mlflow-postgresql"
    port: 5432
    database: "mlflow"

    existingSecret:
      name: mlflow-postgresql-credentials-external-secret
      usernameKey: username
      passwordKey: password

backendStore:
  postgres:
    enabled: true
    host: "mlflow-mlflow-postgresql.mlflow.svc.cluster.local"
    port: 5432
    database: "mlflow"

  existingDatabaseSecret:
    name: mlflow-postgresql-credentials-external-secret
    usernameKey: username
    passwordKey: password

artifactRoot:
  s3:
    enabled: true
    path: s3://minio
    bucket: mlflow
    existingSecret:
      name: mlflow-minio-credentials-external-secret
      keyOfAccessKeyId: access_key_id
      keyOfSecretAccessKey: secret_access_key

# Ingress Configuration
ingress:
  enabled: true
  className: cloudflare-tunnel
  hosts:
    - host: "mlflow.icantkube.help"
      paths:
        - path: /
          pathType: Prefix
  
  annotations:
    cloudflare-tunnel-ingress-controller.strrl.dev/backend-protocol: "http"
    cloudflare-tunnel-ingress-controller.strrl.dev/proxy-ssl-verify: "on"

# image:
#   repository: "openeuler/mlflow"
#   tag: "3.4.0-oe2403sp2"